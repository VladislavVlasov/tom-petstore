(()=>{"use strict";const e={};function t(){if(location.hash)return location.hash.replace("#","")}let o=!0,s=(e=500)=>{document.documentElement.classList.contains("lock")?i(e):n(e)},i=(e=500)=>{let t=document.querySelector("body");if(o){let s=document.querySelectorAll("[data-lp]");setTimeout((()=>{for(let e=0;e<s.length;e++){s[e].style.paddingRight="0px"}t.style.paddingRight="0px",document.documentElement.classList.remove("lock")}),e),o=!1,setTimeout((function(){o=!0}),e)}},n=(e=500)=>{let t=document.querySelector("body");if(o){let s=document.querySelectorAll("[data-lp]");for(let e=0;e<s.length;e++){s[e].style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px"}t.style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px",document.documentElement.classList.add("lock"),o=!1,setTimeout((function(){o=!0}),e)}};function a(){i(),document.documentElement.classList.remove("menu-open")}function r(e){setTimeout((()=>{window.FLS&&console.log(e)}),0)}e.popup=new class{constructor(e){let t={logging:!0,init:!0,attributeOpenButton:"data-popup",attributeCloseButton:"data-close",fixElementSelector:"[data-lp]",youtubeAttribute:"data-popup-youtube",youtubePlaceAttribute:"data-popup-youtube-place",setAutoplayYoutube:!0,classes:{popup:"popup",popupContent:"popup__content",popupActive:"popup_show",bodyActive:"popup-show"},focusCatch:!0,closeEsc:!0,bodyLock:!0,hashSettings:{location:!0,goHash:!0},on:{beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){}}};this.youTubeCode,this.isOpen=!1,this.targetOpen={selector:!1,element:!1},this.previousOpen={selector:!1,element:!1},this.lastClosed={selector:!1,element:!1},this._dataValue=!1,this.hash=!1,this._reopen=!1,this._selectorOpen=!1,this.lastFocusEl=!1,this._focusEl=["a[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"button:not([disabled]):not([aria-hidden])","select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","area[href]","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],this.options={...t,...e,classes:{...t.classes,...e?.classes},hashSettings:{...t.hashSettings,...e?.hashSettings},on:{...t.on,...e?.on}},this.bodyLock=!1,this.options.init&&this.initPopups()}initPopups(){this.popupLogging("Проснулся"),this.eventsPopup()}eventsPopup(){document.addEventListener("click",function(e){const t=e.target.closest(`[${this.options.attributeOpenButton}]`);if(t)return e.preventDefault(),this._dataValue=t.getAttribute(this.options.attributeOpenButton)?t.getAttribute(this.options.attributeOpenButton):"error",this.youTubeCode=t.getAttribute(this.options.youtubeAttribute)?t.getAttribute(this.options.youtubeAttribute):null,"error"!==this._dataValue?(this.isOpen||(this.lastFocusEl=t),this.targetOpen.selector=`${this._dataValue}`,this._selectorOpen=!0,void this.open()):void this.popupLogging(`Ой ой, не заполнен атрибут у ${t.classList}`);return e.target.closest(`[${this.options.attributeCloseButton}]`)||!e.target.closest(`.${this.options.classes.popupContent}`)&&this.isOpen?(e.preventDefault(),void this.close()):void 0}.bind(this)),document.addEventListener("keydown",function(e){if(this.options.closeEsc&&27==e.which&&"Escape"===e.code&&this.isOpen)return e.preventDefault(),void this.close();this.options.focusCatch&&9==e.which&&this.isOpen&&this._focusCatch(e)}.bind(this)),this.options.hashSettings.goHash&&(window.addEventListener("hashchange",function(){window.location.hash?this._openToHash():this.close(this.targetOpen.selector)}.bind(this)),window.addEventListener("load",function(){window.location.hash&&this._openToHash()}.bind(this)))}open(e){if(o)if(this.bodyLock=!(!document.documentElement.classList.contains("lock")||this.isOpen),e&&"string"==typeof e&&""!==e.trim()&&(this.targetOpen.selector=e,this._selectorOpen=!0),this.isOpen&&(this._reopen=!0,this.close()),this._selectorOpen||(this.targetOpen.selector=this.lastClosed.selector),this._reopen||(this.previousActiveElement=document.activeElement),this.targetOpen.element=document.querySelector(this.targetOpen.selector),this.targetOpen.element){if(this.youTubeCode){const e=`https://www.youtube.com/embed/${this.youTubeCode}?rel=0&showinfo=0&autoplay=1`,t=document.createElement("iframe");t.setAttribute("allowfullscreen","");const o=this.options.setAutoplayYoutube?"autoplay;":"";if(t.setAttribute("allow",`${o}; encrypted-media`),t.setAttribute("src",e),!this.targetOpen.element.querySelector(`[${this.options.youtubePlaceAttribute}]`)){this.targetOpen.element.querySelector(".popup__text").setAttribute(`${this.options.youtubePlaceAttribute}`,"")}this.targetOpen.element.querySelector(`[${this.options.youtubePlaceAttribute}]`).appendChild(t)}this.options.hashSettings.location&&(this._getHash(),this._setHash()),this.options.on.beforeOpen(this),document.dispatchEvent(new CustomEvent("beforePopupOpen",{detail:{popup:this}})),this.targetOpen.element.classList.add(this.options.classes.popupActive),document.documentElement.classList.add(this.options.classes.bodyActive),this._reopen?this._reopen=!1:!this.bodyLock&&n(),this.targetOpen.element.setAttribute("aria-hidden","false"),this.previousOpen.selector=this.targetOpen.selector,this.previousOpen.element=this.targetOpen.element,this._selectorOpen=!1,this.isOpen=!0,setTimeout((()=>{this._focusTrap()}),50),this.options.on.afterOpen(this),document.dispatchEvent(new CustomEvent("afterPopupOpen",{detail:{popup:this}})),this.popupLogging("Открыл попап")}else this.popupLogging("Ой ой, такого попапа нет.Проверьте корректность ввода. ")}close(e){e&&"string"==typeof e&&""!==e.trim()&&(this.previousOpen.selector=e),this.isOpen&&o&&(this.options.on.beforeClose(this),document.dispatchEvent(new CustomEvent("beforePopupClose",{detail:{popup:this}})),this.youTubeCode&&this.targetOpen.element.querySelector(`[${this.options.youtubePlaceAttribute}]`)&&(this.targetOpen.element.querySelector(`[${this.options.youtubePlaceAttribute}]`).innerHTML=""),this.previousOpen.element.classList.remove(this.options.classes.popupActive),this.previousOpen.element.setAttribute("aria-hidden","true"),this._reopen||(document.documentElement.classList.remove(this.options.classes.bodyActive),!this.bodyLock&&i(),this.isOpen=!1),this._removeHash(),this._selectorOpen&&(this.lastClosed.selector=this.previousOpen.selector,this.lastClosed.element=this.previousOpen.element),this.options.on.afterClose(this),document.dispatchEvent(new CustomEvent("afterPopupClose",{detail:{popup:this}})),setTimeout((()=>{this._focusTrap()}),50),this.popupLogging("Закрыл попап"))}_getHash(){this.options.hashSettings.location&&(this.hash=this.targetOpen.selector.includes("#")?this.targetOpen.selector:this.targetOpen.selector.replace(".","#"))}_openToHash(){let e=document.querySelector(`.${window.location.hash.replace("#","")}`)?`.${window.location.hash.replace("#","")}`:document.querySelector(`${window.location.hash}`)?`${window.location.hash}`:null;(document.querySelector(`[${this.options.attributeOpenButton} = "${e}"]`)?document.querySelector(`[${this.options.attributeOpenButton} = "${e}"]`):document.querySelector(`[${this.options.attributeOpenButton} = "${e.replace(".","#")}"]`))&&e&&this.open(e)}_setHash(){history.pushState("","",this.hash)}_removeHash(){history.pushState("","",window.location.href.split("#")[0])}_focusCatch(e){const t=this.targetOpen.element.querySelectorAll(this._focusEl),o=Array.prototype.slice.call(t),s=o.indexOf(document.activeElement);e.shiftKey&&0===s&&(o[o.length-1].focus(),e.preventDefault()),e.shiftKey||s!==o.length-1||(o[0].focus(),e.preventDefault())}_focusTrap(){const e=this.previousOpen.element.querySelectorAll(this._focusEl);!this.isOpen&&this.lastFocusEl?this.lastFocusEl.focus():e[0].focus()}popupLogging(e){this.options.logging&&r(`[Попапос]: ${e}`)}}({});let l=(e,t=!1,o=500,s=0)=>{const i=document.querySelector(e);if(i){let n="",l=0;if(t){n="header.header";const e=document.querySelector(n);e.classList.contains("_header-scroll")?l=e.offsetHeight:(e.style.cssText="transition-duration: 0s;",e.classList.add("_header-scroll"),l=e.offsetHeight,e.classList.remove("_header-scroll"),setTimeout((()=>{e.style.cssText=""}),0))}let c={speedAsDuration:!0,speed:o,header:n,offset:s,easing:"easeOutQuad"};if(document.documentElement.classList.contains("menu-open")&&a(),"undefined"!=typeof SmoothScroll)(new SmoothScroll).animateScroll(i,"",c);else{let e=i.getBoundingClientRect().top+scrollY;e=l?e-l:e,e=s?e-s:e,window.scrollTo({top:e,behavior:"smooth"})}r(`[gotoBlock]: Юхуу...едем к ${e}`)}else r(`[gotoBlock]: Ой ой..Такого блока нет на странице: ${e}`)};let c={getErrors(e){let t=0,o=e.querySelectorAll("*[data-required]");return o.length&&o.forEach((e=>{null===e.offsetParent&&"SELECT"!==e.tagName||e.disabled||(t+=this.validateInput(e))})),t},validateInput(e){let t=0;return"email"===e.dataset.required?(e.value=e.value.replace(" ",""),this.emailTest(e)?(this.addError(e),t++):this.removeError(e)):("checkbox"!==e.type||e.checked)&&e.value.trim()?this.removeError(e):(this.addError(e),t++),t},addError(e){e.classList.add("_form-error"),e.parentElement.classList.add("_form-error");let t=e.parentElement.querySelector(".form__error");t&&e.parentElement.removeChild(t),e.dataset.error&&e.parentElement.insertAdjacentHTML("beforeend",`<div class="form__error">${e.dataset.error}</div>`)},removeError(e){e.classList.remove("_form-error"),e.parentElement.classList.remove("_form-error"),e.parentElement.querySelector(".form__error")&&e.parentElement.removeChild(e.parentElement.querySelector(".form__error"))},formClean(t){t.reset(),setTimeout((()=>{let o=t.querySelectorAll("input,textarea");for(let e=0;e<o.length;e++){const t=o[e];t.parentElement.classList.remove("_form-focus"),t.classList.remove("_form-focus"),c.removeError(t)}let s=t.querySelectorAll(".checkbox__input");if(s.length>0)for(let e=0;e<s.length;e++){s[e].checked=!1}if(e.select){let o=t.querySelectorAll(".select");if(o.length)for(let t=0;t<o.length;t++){const s=o[t].querySelector("select");e.select.selectBuild(s)}}}),0)},emailTest:e=>!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)};let d=!1;setTimeout((()=>{if(d){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0);function u(){const e=document.querySelector(".header");window.scrollY>=1?e.classList.add("_header-scroll"):e.classList.remove("_header-scroll")}new class{constructor(e){this.type=e}init(){this.оbjects=[],this.daClassname="_dynamic_adapt_",this.nodes=[...document.querySelectorAll("[data-da]")],this.nodes.forEach((e=>{const t=e.dataset.da.trim().split(","),o={};o.element=e,o.parent=e.parentNode,o.destination=document.querySelector(`${t[0].trim()}`),o.breakpoint=t[1]?t[1].trim():"767",o.place=t[2]?t[2].trim():"last",o.index=this.indexInParent(o.parent,o.element),this.оbjects.push(o)})),this.arraySort(this.оbjects),this.mediaQueries=this.оbjects.map((({breakpoint:e})=>`(${this.type}-width: ${e}px),${e}`)).filter(((e,t,o)=>o.indexOf(e)===t)),this.mediaQueries.forEach((e=>{const t=e.split(","),o=window.matchMedia(t[0]),s=t[1],i=this.оbjects.filter((({breakpoint:e})=>e===s));o.addEventListener("change",(()=>{this.mediaHandler(o,i)})),this.mediaHandler(o,i)}))}mediaHandler(e,t){e.matches?t.forEach((e=>{this.moveTo(e.place,e.element,e.destination)})):t.forEach((({parent:e,element:t,index:o})=>{t.classList.contains(this.daClassname)&&this.moveBack(e,t,o)}))}moveTo(e,t,o){t.classList.add(this.daClassname),"last"===e||e>=o.children.length?o.append(t):"first"!==e?o.children[e].before(t):o.prepend(t)}moveBack(e,t,o){t.classList.remove(this.daClassname),void 0!==e.children[o]?e.children[o].before(t):e.append(t)}indexInParent(e,t){return[...e.children].indexOf(t)}arraySort(e){"min"===this.type?e.sort(((e,t)=>e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?-1:"last"===e.place||"first"===t.place?1:0:e.breakpoint-t.breakpoint)):e.sort(((e,t)=>e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?1:"last"===e.place||"first"===t.place?-1:0:t.breakpoint-e.breakpoint))}}("max").init(),window.addEventListener("scroll",u),document.addEventListener("DOMContentLoaded",u);const p=document.querySelectorAll("section[id]");function h(){const e=window.pageYOffset;p.forEach((t=>{const o=t.offsetHeight,s=t.offsetTop-150;let i=t.getAttribute("id");e>s&&e<=s+o?document.querySelector(".bottom-header__body a[href*="+i+"]").classList.add("_navigator-active"):document.querySelector(".bottom-header__body a[href*="+i+"]").classList.remove("_navigator-active")}))}window.addEventListener("scroll",h),document.addEventListener("DOMContentLoaded",h),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),document.querySelector(".icon-menu")&&document.addEventListener("click",(function(e){o&&e.target.closest(".icon-menu")&&(s(),document.documentElement.classList.toggle("menu-open"))})),function(){const t=document.forms;if(t.length)for(const e of t)e.addEventListener("submit",(function(e){o(e.target,e)})),e.addEventListener("reset",(function(e){const t=e.target;c.formClean(t)}));async function o(e,t){if(0===(e.hasAttribute("data-no-validate")?0:c.getErrors(e))){if(e.hasAttribute("data-ajax")){t.preventDefault();const o=e.getAttribute("action")?e.getAttribute("action").trim():"#",i=e.getAttribute("method")?e.getAttribute("method").trim():"GET",n=new FormData(e);e.classList.add("_sending");const a=await fetch(o,{method:i,body:n});if(a.ok){let t=await a.json();e.classList.remove("_sending"),s(e,t)}else alert("Ошибка"),e.classList.remove("_sending")}else e.hasAttribute("data-dev")&&(t.preventDefault(),s(e))}else if(t.preventDefault(),e.querySelector("._form-error")&&e.hasAttribute("data-goto-error")){const t=e.dataset.gotoError?e.dataset.gotoError:"._form-error";l(t,!0,1e3)}}function s(t,o=""){document.dispatchEvent(new CustomEvent("formSent",{detail:{form:t}})),setTimeout((()=>{if(e.popup){const o=t.dataset.popupMessage;o&&e.popup.open(o)}}),0),c.formClean(t),r(`[Формы]: ${"Форма отправлена!"}`)}}(),function(){function o(t){if("click"===t.type){const o=t.target;if(o.closest("[data-goto]")){const s=o.closest("[data-goto]"),i=s.dataset.goto?s.dataset.goto:"",n=!!s.hasAttribute("data-goto-header"),r=s.dataset.gotoSpeed?s.dataset.gotoSpeed:500,c=s.dataset.gotoTop?parseInt(s.dataset.gotoTop):0;if(e.fullpage){const t=+document.querySelector(`${i}`).closest("[data-fp-section]").dataset.fpId;t&&e.fullpage.switchingSection(t),document.documentElement.classList.contains("menu-open")&&a()}else l(i,n,r,c);t.preventDefault()}}else if("watcherCallback"===t.type&&t.detail){const e=t.detail.entry,o=e.target;if("navigator"===o.dataset.watch){document.querySelector("[data-goto]._navigator-active");let t;if(o.id&&document.querySelector(`[data-goto="#${o.id}"]`))t=document.querySelector(`[data-goto="#${o.id}"]`);else if(o.classList.length)for(let e=0;e<o.classList.length;e++){const s=o.classList[e];if(document.querySelector(`[data-goto=".${s}"]`)){t=document.querySelector(`[data-goto=".${s}"]`);break}}e.isIntersecting?t&&t.classList.add("_navigator-active"):t&&t.classList.remove("_navigator-active")}}}if(document.addEventListener("click",o),document.addEventListener("watcherCallback",o),t()){let e;document.querySelector(`#${t()}`)?e=`#${t()}`:document.querySelector(`.${t()}`)&&(e=`.${t()}`),e&&l(e,!0,500,20)}}()})();